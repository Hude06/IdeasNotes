<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub Authentication Example</title>
</head>
<body>

<h1>GitHub Authentication Example</h1>
<button onclick="authenticateWithGitHub()">Authenticate with GitHub</button>

<script>
const clientId = '3f9756c0e365406b866a';
const redirectUri = 'http://127.0.0.1:5501/src/login.html';
const authorizeUrl = `https://github.com/login/oauth/authorize?client_id=`;
const tokenUrl = 'https://github.com/login/oauth/access_token';
const clientSecret = '2657f125505c135d73786f452d7095edefd71ad4'

function authenticateWithGitHub() {
  // Step 1: Redirect the user to GitHub login page
  console.log('Redirecting to GitHub for authentication...');
  window.location.href = authorizeUrl+clientId;
}

// Check for the code parameter in the URL after GitHub redirects back
const urlParams = new URLSearchParams(window.location.search);
const code = urlParams.get('code');

if (code) {
  // Step 2: Exchange code for access token
  exchangeCodeForAccessToken(clientId,clientSecret,code)
    console.log(code)
}
function exchangeCodeForAccessToken(clientId, clientSecret, code) {
  const tokenEndpoint = 'https://github.com/login/oauth/access_token';

  const params = new URLSearchParams({
    client_id: clientId,
    client_secret: clientSecret,
    code: code,
  });

  return fetch(tokenEndpoint, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
      'Accept': 'application/json',
    },
    body: params.toString(),
  })
    .then(response => response.json())
    .then(data => data.access_token)
    .catch(error => {
      console.error('Error exchanging code for access token:', error);
    });
}

</script>

</body>
</html>
